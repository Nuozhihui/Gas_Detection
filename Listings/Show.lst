C51 COMPILER V9.60.0.0   SHOW                                                              05/04/2022 15:09:53 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE SHOW
OBJECT MODULE PLACED IN .\Objects\Show.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE Library\Show\Show.c COMPACT OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Library\ADC;.
                    -\Library\DHT11;.\Library\LCD;.\Library\STEP;.\Library\Show;.\Library\KEY;.\Library\MAX6675;.\Library\SIM800C) DEBUG OBJE
                    -CTEXTEND PRINT(.\Listings\Show.lst) TABS(2) OBJECT(.\Objects\Show.obj)

line level    source

   1          #include "Show.h"
   2          #include "lcd.h"
   3          #include "dht11.h"
   4          #include<intrins.h>
   5          #include<stdio.h>
   6          #include "Gas.h"
   7          #include "SIM800C.h"
   8          #include "MAX6675.h"
   9          extern unsigned char key_switch_f;
  10          extern unsigned char key_state;   //状态
  11          
  12          
  13          char phoneNumber[] = "17865677883";   //替换成需要被拨打电话的号码
  14          char msg[] = "Gas flameout hazard warning";   //短信内容  
  15          
  16          
  17          //----------------DHT11数据变量区-------------------------------
  18          unsigned int rec_dat[4];
  19          unsigned char rec_dat_lcd0[6];
  20          unsigned char rec_dat_lcd1[6];
  21          unsigned char rec_dat_lcd2[6];
  22          unsigned char rec_dat_lcd3[6];
  23          
  24          
  25          
  26          sbit BEEP=P2^7;
  27          //初始化
  28          void Show_iint()
  29          {
  30   1        
  31   1        InitLcd1602();            //初始化LCD
  32   1        LcdShowStr(0,0,"GAS:"); //更新画面
  33   1        
  34   1        LcdShowStr(0,1,"Temp:");  //更新画面
  35   1        
  36   1      }
  37          
  38          unsigned int Gas_val=0;
  39          unsigned int MAX6675_val=0;
  40          unsigned char Ignition_State=0;   //0:未升到指定温度    1:已到达指定温度  
  41          unsigned char Note_State=0;   
  42          
  43          unsigned char Temperature_gas_State=0;    //
  44          
  45          
  46          //显示
  47          void Show()
  48          {
  49   1        
  50   1          Gas_val=gx_Gas();//热偶
  51   1           MAX6675_val=REDE_MAX6675();  //热偶
  52   1          DHT11_delay_ms(20);
  53   1          DHT11_receive();
C51 COMPILER V9.60.0.0   SHOW                                                              05/04/2022 15:09:53 PAGE 2   

  54   1      
  55   1        
  56   1          //空气
  57   1          sprintf(rec_dat_lcd0,"%d",  Gas_val);
  58   1      
  59   1          DHT11_delay_ms(13);
  60   1          LcdShowStr(6,0,"           ");
  61   1          LcdShowStr(6,0,rec_dat_lcd0);
  62   1      
  63   1          
  64   1        
  65   1          //温度
  66   1          sprintf(rec_dat_lcd2,"%d",rec_dat[0]);
  67   1          sprintf(rec_dat_lcd3,"%d",rec_dat[1]);
  68   1          DHT11_delay_ms(13);
  69   1        
  70   1          //热偶
  71   1          sprintf(rec_dat_lcd1,"%d",MAX6675_val);
  72   1      
  73   1          LcdShowStr(12,0,rec_dat_lcd1);
  74   1          
  75   1          LcdShowStr(6,1,rec_dat_lcd2);
  76   1          LcdShowStr(8,1,".");
  77   1          LcdShowStr(9,1,rec_dat_lcd3);
  78   1          LcdShowStr(10,1," %");
  79   1      
  80   1          
  81   1          if( Gas_val>150 || rec_dat[0]>80)
  82   1          {
  83   2            if(Temperature_gas_State==0)
  84   2            {
  85   3              key_state=2;
  86   3              key_switch_f =2;
  87   3              BEEP=0;
  88   3              sendMessage(phoneNumber,msg);   //发送短信
  89   3              Temperature_gas_State=1;
  90   3            }
  91   2            
  92   2            
  93   2            
  94   2          }else{
  95   2            Temperature_gas_State=0;
  96   2            BEEP=1;
  97   2          }
  98   1          
  99   1          if(MAX6675_val>80)
 100   1          {
 101   2            Ignition_State=1;
 102   2          
 103   2          }
 104   1            
 105   1        
 106   1          
 107   1            if(Ignition_State==1)
 108   1          {
 109   2            
 110   2            if(MAX6675_val<35)
 111   2            {
 112   3            key_state=2;
 113   3            key_switch_f =2;
 114   3            Ignition_State=0;
 115   3            sendMessage(phoneNumber,msg);   //发送短信
C51 COMPILER V9.60.0.0   SHOW                                                              05/04/2022 15:09:53 PAGE 3   

 116   3            
 117   3            }
 118   2            
 119   2          }
 120   1        
 121   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    447    ----
   CONSTANT SIZE    =     31    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =     79    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
